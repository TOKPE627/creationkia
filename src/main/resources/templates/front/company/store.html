<!doctype html>
<html lang="en" xmlns:th="http://www.w3.org/1000/xhtml">
<head th:replace="include/head"></head>
<link rel="stylesheet" th:href="@{/assets/css/styleService.css}">

<link rel="stylesheet" th:href="@{/assets/css/styleWelcome.css}">
<link rel="stylesheet" th:href="@{/assets/css/styleNavbar.css}">
<link rel="stylesheet" th:href="@{/assets/css/styleHeaderMenu.css}">
<link rel="stylesheet" th:href="@{/assets/css/styleFooter.css}">
<style type="text/css">

    .btn-success {
	  background-color: #6FB70F !important;
	  border-color: #6FB70F !important;
	}
    .btn-success:hover,
    .btn-success:active,
    .btn-success:visited,
    .btn-success:focus {
      background-color: #6FB70F !important;
      border-color: #6FB70F !important;
    }

</style>

<body style="background-color: #e8e8e8 !important; ">	
     <div th:replace="include/navbar"></div>
     <div class="row companyServiceDiv">
        <div th:replace="include/companyHead"></div>
        <div style="display: inline; margin-top: 2rem; margin-left: 3rem;">
           <span><strong style="color: #6FB70F;"></strong></span>
            <div class="container" style=" margin-left: 10px;">
               <div class="card-body">  
		                <span th:utext="${company.description}"></span>
				   </div>
			</div>
        </div>
     </div>
     <div  class="row" style="margin-top: 8px; margin-left: 3.6rem;">
        <div class="col-md-3">
            <ul data-th-each="w : ${workingHourList}" 
			 	style="list-style-type: '-'; padding: 0; margin: 0;">
			 	<span>Actuellement</span>
			     <span style="color:  #6FB70F;" th:if="${w.status=='open'}">Ouvert</span>
			     <span style="color:  #6FB70F;" class="colorText" th:if="${w.status=='close'}">Fermé</span>
			     <br>
                <span><strong>Horaires</strong></span>
			    
			    <li th:text="${w.openHour}" style="margin: 0 0 !important;"></li>		      
       		     <li th:text="${w.closeHour}" style="margin: 0 0 !important;"></li>         
		    </ul>
           <span> <strong>Villes de livraison</strong></span>
 	       <ul data-th-each="t : ${townAvailableList}" 
			 	style="list-style-type: '-'; padding: 0; margin: 0;">
			    <li th:text="${t.town}" style="margin: 0 0 !important;"></li>
		    </ul>
        </div>      	
        
		<div th:if="${storeProductsExist==true}" class="col-md-9 row">
		      
			   <div  data-th-each="product : ${productList}">
			     <div 
			     	th:if="${product.galery !=null  and product.galery.image1 !='' and product.galery.image2 !='' and product.galery.image3 !='' and product.galery.image4 !=''}"
			     class="product-single" style="background-color: white !important;
			       width: 10rem;margin-left: 10px;
			     ">
			     
				    <div class="product-thumb">
			         	<a href="#">
						   <img width="100%" height="140rem" style="margin-top: 20px;"
			                    class="img-responsive"
			                   th:src="@{${awsBucketProduct}+${product.galery.id}+'/'+${product.galery.image1}}" alt=""
			                   th:data-id          = "${product.id}"
							   th:data-name        = "${product.name}"
						       th:data-detail      = "${product.detail}"
						       th:data-upprice     = "${product.upPrice}"
						       th:data-price       = "${product.price}"
						       th:data-quantity    = "${product.quantity}"												            
						       th:data-category    = "${product.category.name}"
						       th:data-deliveryprice = "${product.deliveryPrice}"							
						       												       
						       th:data-image1="@{${awsBucketProduct}+${product.galery.id}+'/'+${product.galery.image1}}" 
					           th:data-image2="@{${awsBucketProduct}+${product.galery.id}+'/'+${product.galery.image2}}" 
						       th:data-image3="@{${awsBucketProduct}+${product.galery.id}+'/'+${product.galery.image3}}" 
						       th:data-image4="@{${awsBucketProduct}+${product.galery.id}+'/'+${product.galery.image4}}"
						       th:data-companyimage="@{${awsBucketCompany}+${product.user.company.galery.id}+'/'+${product.user.company.galery.companyImage}}"
		
						       th:data-companyname = "@{${product.user.company.name}}"
							   data-toggle="modal" data-target="#quickViewModal"
             /> 
						 </a>
						 	<div class="product-quick-view">
								<a href="javascript:void(0);"
				                   th:data-id          = "${product.id}"							
								   th:data-name        = "${product.name}"
							       th:data-detail      = "${product.detail}"
							       th:data-upprice     = "${product.upPrice}"
							       th:data-price       = "${product.price}"
							       th:data-quantity    = "${product.quantity}"												       												      
							       th:data-category    = "${product.category.name}"
							       th:data-deliveryprice = "${product.deliveryPrice}"							
			         
			                       th:data-image1="@{${awsBucketProduct}+${product.galery.id}+'/'+${product.galery.image1}}" 
						           th:data-image2="@{${awsBucketProduct}+${product.galery.id}+'/'+${product.galery.image2}}" 
							       th:data-image3="@{${awsBucketProduct}+${product.galery.id}+'/'+${product.galery.image3}}" 
							       th:data-image4="@{${awsBucketProduct}+${product.galery.id}+'/'+${product.galery.image4}}"
							       th:data-companyimage="@{${awsBucketCompany}+${product.user.company.galery.id}+'/'+${product.user.company.galery.companyImage}}"
							       
							    
							       th:data-companyname = "@{${product.user.company.name}}"												       
								 data-toggle="modal" data-target="#quickViewModal">Acheter</a>
							</div>
					  </div>
					  <div class="product-price-rating" id="service">
							<div class="pull-left">
								<span style="color: black;" th:text="${#strings.abbreviate(product.name,12)}"></span><br/>
								<span th:text="${product.price}+ ' XOF'"> </span>
							</div>
						</div>
			         </div>
				</div>
             </div>
          </div>
  
     <div style="margin-top: 3rem;"></div>
	 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

            
       <script th:src="@{/assets/js/vendor/modernizr-3.6.0.min.js}"></script>
	<!-- jquery-3.3.1 version -->
	<script th:src="@{/assets/js/vendor/jquery-3.2.1.min.js}"></script>
	<!-- bootstra.min js -->
	<script th:src="@{/assets/js/bootstrap.min.js}"></script>
	<!-- mmenu js -->
	<script th:src="@{/assets/js/jquery.mmenu.js}"></script>
	<!-- easing js -->
	<script th:src="@{/assets/js/jquery.easing.min.js}"></script>
	<!---slick-js-->
	<script th:src="@{/assets/js/slick.min.js}"></script>
	<!---letteranimation-js-->
	<script th:src="@{/assets/js/letteranimation.min.js}"></script>
	<!-- jquery-ui js -->
	<script th:src="@{/assets/js/jquery-ui.min.js}"></script>
	<!-- jquery.countdown js -->
	<script th:src="@{/assets/js/jquery.countdown.min.js}"></script>
	<!-- venobox js -->
	<script th:src="@{/assets/js/venobox.min.js}"></script>
	<!-- plugins js -->
	<script th:src="@{/assets/js/plugins.js}"></script>
	<!-- main js -->
	<script th:src="@{/assets/js/main.js}"></script>	

	<script th:src="@{/js/mainFrontScript.js}"></script>

	<!--footer-area start-->
 <script>
    var productId;
    $(document).ready(function(){
    	$("#quickViewModal").modal({
            keyboard: true,
            backdrop: "static",
            show: false,
            
        }).on("show.bs.modal", function(event){
        	var button        = $(event.relatedTarget);
        	var id            = button.data("id");
            var name          = button.data("name");
            var detail        = button.data("detail");
            var upprice       = button.data("upprice");
            var price         = button.data("price");
            var category      = button.data("category");
            var quantity      = button.data("quantity");
            var subcategory   = button.data("subcategory");
            var deliveryprice = button.data("deliveryprice");

            var image1        = button.data('image1');
            var image2        = button.data('image2');
            var image3        = button.data('image3');
            var image4        = button.data('image4');
            var detail        = button.data("detail");
            var companyname   = button.data('companyname');
            var companyimage  = button.data('companyimage');
            
            $(this).find("#id").html($("<b> " +id+ "</>"));
            $(this).find("#name").html($("<b> " + name +"</b>"));
            $(this).find("#detail").html($("<li> " + detail +"</li>"));
            $(this).find("#upprice").html($("<b> " + upprice +"</b>"));
            $(this).find("#price").html($("<b> " + price +"</b>"));
            $(this).find("#category").html($("<span>" + category +"</span> "));
            $(this).find("#subcategory").html($("<span>" + subcategory +"</span> "));
            $(this).find("#quantity").html($("<span> " + quantity +"</span>"));
            $(this).find("#deliveryprice").html($("<b> " + deliveryprice   + " FCFA"  + "</b>"));

            $(this).find("#image1").attr("src", image1);
            $(this).find("#image2").attr("src", image2);
            $(this).find("#image3").attr("src", image3);
            $(this).find("#image4").attr("src", image4);
            $(this).find("#companyimage").attr("src", companyimage);
            $(this).find("#companyname").html($("<span>" + companyname + "</span>"));
            productId=id; 
        })
    });
    function bookNow(){
    	$.ajax({
			type: "GET",
	        contentType: "application/json",
	        url: '/booking/product?product_id='+productId,
	        data: {},
	        dataType: 'json',
	        cache: false,
	        timeout: 600000,
	        success: function (data) {
				window.location.href = '/booking/add/'+data.id;
	            //window.location.href = data.name+'booking/add/'+data.id;
	        },
	        error: function (e) {
	            console.log("ERROR : ", e);
	        }
		});  
     }
    function changeImage(a){
        var idImage    = a.id;
        var image = a.src;
    	$.ajax({
    		type: "GET",
            contentType: "application/json",
            url: '/product/changeImage?image='+image,
            data: {},
            dataType: 'json',
            cache: false,
            timeout: 600000,
            success: function (data) {
            	$("#image1").attr("src",data.brand);    
            },
            error: function (e) {
                console.log("ERROR : ", e);
            }
    	});
     } 
    </script>



	<div class="modal fade quickViewModal" id="quickViewModal" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-lg-4">
							<div class="tab-content">
								<div id="product-1" class="tab-pane fade in show active">
									<div class="product-details-thumb">
										<img id="image1" alt=""
										 onClick="changeImage(this)" />
									</div>
								</div>
							</div>
							<ul class="nav nav-tabs products-nav-tabs horizontal quick-view mt-10" >
								<li><a data-toggle="tab">
							      	  <img id="image2"
							      	     alt=""  onClick="changeImage(this)"
							      	  />
							      	</a>
							    </li>
								<li>
								   <a data-toggle="tab" href="#product-3">
								     <img id="image3" alt="" onClick="changeImage(this)" />
								   </a>
								</li>
								<li>
								   <a data-toggle="tab" href="#product-4">
								     <img id="image4" alt="" onClick="changeImage(this)"/>
								   </a>
								</li>
							</ul>
						</div>
						<div class="col-lg-8">
							<div class="row">
								<div class="col-lg-8">
									<div class="product-details-desc">
									   <h2 id="name"></h2>
										<ul id="detail">
										   <li></li>
										</ul>
										<div class="product-meta">
											<ul class="list-none">
<!-- 												<li>SKU: 00012 <span>|</span></li>
 -->												<li>Categorie:
													<a href="#" id="category"></a>
												<!-- 	<a href="#">Macbook</a>
													<a href="#">Laptop</a> -->
<!-- 													<span>|</span>
 -->												</li>
											<!--  	<li>Tag:
													<a href="#" id="subcategory"></a>
													<a href="#">Apple</a>
												</li>  -->
											</ul>
										</div>
								<!-- 		<div class="social-icons style-5">
											<span>Partager sur:</span>
											<a href="#"><i class="fa fa-facebook"></i></a>
											<a href="#"><i class="fa fa-twitter"></i></a>
											<a href="#"><i class="fa fa-google-plus"></i></a>
											<a href="#"><i class="fa fa-rss"></i></a>
										</div> -->
										<div class="social-icons style-5" style="cursor: pointer;">
										  <span>Compagnie:</span>
										  <span>
										      <img id="companyimage" width="10%;" alt=""  onClick="companyImage(this)">
										  </span>                                          
										</div> 
									</div>
								</div>
								<div class="col-lg-4">
									<div class="product-action stuck text-left">
										<div class="home-delivery">
											<a  onClick="bookNow()" style="cursor: pointer;"><i class="ti-truck"></i> Livraison à domicile</a>
										</div>
										<div class="product-price-rating">
										 	<div>
												<del id="upprice"> </del>
											</div> 
											<span id="price"> </span>
										<!-- 	<div class="pull-right">
												<i class="fa fa-star"></i>
												<i class="fa fa-star"></i>
												<i class="fa fa-star"></i>
												<i class="fa fa-star"></i>
												<i class="fa fa-star-o"></i>
											</div> -->
										</div>
										<div class="product-colors mt-20">
											<label>	Quantité disponible:</label>
											<span id="quantity"></span>
											
										</div>
									 	<div class="product-quantity mt-15">
											<label>Livraison:</label>
											<span id="deliveryprice"></span>
										</div> 
										<div class="add-to-get mt-2">
											<a  onClick="bookNow()" style="cursor: pointer;"  class="btn btn-success">
											   <span style="color: white;">
												  <i class="fa fa-shopping-cart" 
									               ></i>
												    Acheter maintenant										    
											   </span>
											 </a>
 										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<footer th:replace="include/footer"></footer>

		<!--footer-area end-->
</body>
</html>