<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1000/xhtml">
<head th:replace="common/headerDashboard :: common-header" />

<body>
	<div th:replace="common/headerDashboard :: navbar"></div>
	<div class="container">
			<form class="form-horizontal" th:action="@{/product/update}" method="post"
				enctype="multipart/form-data">
				<fieldset>
					<legend class="center-block">
						Editer le produit					
						<span style="font-size: small"></span>
					</legend>
<!-- 					<input type="hidden" name="store_id" th:value="${product.store.id}" />
 -->					<input type="hidden" name="subCategory_id" th:value="${product.subCategory.id}" />
					
				<!-- 	<div class="form-group">
					   <label class="col-md-2 control-label">*
						Magasin</label>
					   <div class="col-md-8">
							<input
							   type="text" th:value="${product.store.name}"
								class="form-control" disabled="disabled" />
						</div>
					</div> -->
					
					<div class="form-group">
					   <label class="col-md-2 control-label">*
						Cat&eacute;gorie</label>
					   <div class="col-md-8">
			  			  <input
					  	    type="text" th:value="${product.subCategory.category.name}"
							class="form-control" disabled="disabled" />
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-2 control-label">* Sous-categorie</label>
						<div class="col-md-8">
							<input type="text" class="form-control" 
								 th:value="${product.subCategory.name}" disabled="disabled">
							
						</div>
					</div>
				<!-- 	<div class="form-group">
						<label class="col-md-2 control-label">* Selectionner la sous-cat&eacute;gorie</label>
						<div class="col-md-8">
							<select name="subCategory_id">
						       <option data-th-each="subCategory : ${subCategoryList}" th:value="${subCategory.id}" th:text="${subCategory.name}">
						       </option>
						    </select>
						</div>
					</div> -->
					  <div class="form-group">
						<label class="col-md-2 control-label">* Nom</label>
						<div class="col-md-8">
							<input type="text" name="name" class="form-control" 
								placeholder="Preciser le nom du produit" required="required" th:value="${product.name}">
							<span class="help-block">Nom du produit</span>
						</div>
					</div>
				  <div class="form-group row">
						<label class="col-md-2 control-label">Changer l'image 1</label>
	                    <div class="col-md-10">
	                        <div class="col-xs-5">       
	                            <input type="file"
	                                name="extraImageFile" accept="image/png, image/jpeg" /> 
	                             <img class="img-responsive" style="height: 350px;width: 100%;"
								           th:src="@{${product.imagePath1}}" /> 
	                         </div>
	                         <div class="col-xs-5" style="margin-top: 3rem;">
	                            <img style="height: 350px;width: 100%;" alt="Visualiser la photo" id="thumbnail0"/>
                              </div>
                         </div>
				    </div>	
				  <div class="form-group row">
						<label class="col-md-2 control-label">Changer l'image 2</label>
	                    <div class="col-md-10">
	                        <div class="col-xs-5">       
	                            <input type="file"
	                                name="extraImageFile" accept="image/png, image/jpeg" /> 
	                             <img class="img-responsive" style="height: 350px;width: 100%;"
								           th:src="@{${product.imagePath2}}" /> 
	                         </div>
	                         <div class="col-xs-5" style="margin-top: 3rem;">
	                            <img style="height: 350px;width: 100%;" alt="Visualiser la photo" id="thumbnail1"/>
                              </div>
                         </div>
				    </div>	
                   <div class="form-group row">
						<label class="col-md-2 control-label">Changer l'image 3</label>
	                    <div class="col-md-10">
	                        <div class="col-xs-5">       
	                            <input type="file"
	                                name="extraImageFile" accept="image/png, image/jpeg" /> 
	                             <img class="img-responsive" style="height: 350px;width: 100%;"
								           th:src="@{${product.imagePath3}}" /> 
	                         </div>
	                         <div class="col-xs-5" style="margin-top: 3rem;">
	                            <img style="height: 350px;width: 100%;" alt="Visualiser la photo" id="thumbnail2"/>
                              </div>
                         </div>
				    </div>	
				    <div class="form-group row">
						<label class="col-md-2 control-label">Changer l'image 4</label>
	                    <div class="col-md-10">
	                        <div class="col-xs-5">       
	                            <input type="file"
	                                name="extraImageFile" accept="image/png, image/jpeg" /> 
	                             <img class="img-responsive" style="height: 350px;width: 100%;"
								           th:src="@{${product.imagePath4}}" /> 
	                         </div>
	                         <div class="col-xs-5" style="margin-top: 3rem;">
	                            <img style="height: 350px;width: 100%;" alt="Visualiser la photo" id="thumbnail3"/>
                              </div>
                         </div>
				    </div>	
					<div class="form-group">
						<label class="col-md-2 control-label">* Prix</label>
						<div class="col-md-8">
							<input type="number" name="price" class="form-control" 
								placeholder="Preciser le prix" required="required" th:value="${product.price}">
							<span class="help-block">Prix</span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-2 control-label">* Marque</label>
						<div class="col-md-8">
							<input name="brand" class="form-control"
								placeholder="Preciser la marque" required="required" th:value="${product.brand}">
							<span class="help-block">Marque</span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-2 control-label">* Quantité disponible</label>
						<div class="col-md-8">
							<input name="quantity" class="form-control" th:value="${product.quantity}"
								placeholder="Preciser la quantité disponible" required="required">
							<span class="help-block">Quantité disponible</span>
						</div>
					</div>
					
					<div class="form-group">
						<label class="col-md-2 control-label" for="detail">* D&eacute;tails:</label>
						<div class="col-md-8">
							<textarea name="detail" rows="5" class="form-control" th:value="${product.detail}" th:text="${product.detail}"
								placeholder="D&eacute;tails:" required="required"></textarea>
							<span class="help-block">D&eacute;tails: du produit</span>
						</div>
					</div>
                        	<!-- Specific for Multiservice product -->
					
<!-- 					<div  th:if="${product.store.storetype.id == 2}" class="container">
 -->					
                     <div class="container">
                     	<div class="form-group">
							<label class="col-md-2 control-label">* Sp&eacute;cificit&eacute;s:</label>
							<div class="col-md-8">
								<textarea name="specificity" rows="5" class="form-control" th:value="${product.specificity}" th:text="${product.specificity}"
									placeholder="Sp&eacute;cificit&eacute;s:" required="required"></textarea>
								<span class="help-block">Sp&eacute;cificit&eacute;s:</span>
							</div>
						</div>		
					   <!-- <div class="form-group">
						<label class="col-md-2 control-label">* S&eacute;lectionner le d&eacute;lai de livraison</label>
						<div class="col-md-8">
						   <select name="deliveryDelay">
						       <option data-th-each="day : ${dayList}" th:value="${day.name}" th:text="${day.name}">
						       </option>
						      </select>
						    </div>
					    </div> -->	
					  <div class="form-group">
						<label class="col-md-2 control-label">* Délai de livraison</label>
						<div class="col-md-8">
							<input name="deliveryDelay" class="form-control" th:value="${product.deliveryDelay}"
								placeholder="Preciser le delai de livraison" disabled="disabled">
								<span class="help-block">Delai de livraison</span>
							</div>
						</div>	
					</div>
                        	<!-- Specific for Multiservice product -->
                     <div class="form-group">
						<div class="col-md-2"></div>
						<div class="col-md-8">
							<button type="submit" class="btn btn-success">Valider</button>
							<a class="btn btn-danger" th:href="@{/}">Annuler</a>
						</div>
					</div>					
				</fieldset>
			</form>
	</div>
	<div th:replace="common/headerDashboard :: body-bottom-scripts"></div>
	<script type="text/javascript">
		$(document).ready(function() {
		   /* 	
			$('#mainImage').change(function(){
				showImageThumbnail(this);
			}); */ 
			
			$("input[name='extraImageFile']").each(function(index){
				$(this).change(function(){
					showExtraImageThumbnail(this,index);
				});
			});
			function showImageThumbnail(fileInput){
				file = fileInput.files[0];
				reader = new FileReader();
				
				reader.onload = function(e){
					$('#thumbnail').attr('src',e.target.result);
				}
				reader.readAsDataURL(file);
			}
			
			function showExtraImageThumbnail(fileInput,index){
				file = fileInput.files[0];
				reader = new FileReader();
				
				reader.onload = function(e){
					$('#thumbnail'+index).attr('src',e.target.result);
				}
				reader.readAsDataURL(file);
			}
			
		})
	</script>
</body>
</html>
