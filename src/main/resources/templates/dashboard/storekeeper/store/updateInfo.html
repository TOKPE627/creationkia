<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1000/xhtml">
<head th:replace="common/headerDashboard :: common-header" />

<body>
	<div th:replace="common/headerDashboard :: navbar"></div>
	<div class="container">
		<div class="row">
			<form class="form-horizontal" th:action="@{/store/updateStore}" method="post"
				enctype="multipart/form-data">
				<fieldset>
					<legend class="center-block">
						Editer le magasin <span style="font-size: small"></span>
					</legend>
					<input hidden="hidden" name="id" th:value="${store.id}" />
					<input hidden="hidden" name="store_type_id" th:value="${store.storetype.id}" />
				
					<!-- Type of store -->
					<div class="form-group">
						<label class="col-md-2 control-label" for="type">*
							Type de magasin</label>
						<div class="col-md-8">
							<input
							    th:value="${store.storetype.name}" 
								class="form-control"  disabled="disabled" />
						</div>
					</div>

             
					
					<!-- description -->
					<div class="form-group">
						<label class="col-md-2 control-label">* D&eacute;tails:</label>
						<div class="col-md-8">
							<textarea name="detail" rows="5" class="form-control" 
							    th:value="${store.detail}" th:text="${store.detail}" 
								placeholder="D&eacute;tails:"></textarea>
							<span class="help-block">D&eacute;tails: du magasin</span>
						</div>
					</div>

					<!-- upload image -->
				    <div  class="container" style="margin-left: 10%;">
				      <div class="row">
				                      
	                   <div class="form-group">
                            <p>
                               <img alt="Visualiser la photo principale" id="thumbnail0"/>
                            </p>
                            <p>
                               <label>* Logo</label>  
                            </p>
                            <div class="col-xs-3">
                                <input type="file"
                                   name="extraImageFile" accept="image/png, image/jpeg"/> 
                                 <img class="img-responsive" style="height: 220px;width: 100%;"
								           th:src="@{${store.logoPath}}" /> 
                            </div>
                       
					   </div>
                 
                     <div class="col-md-6">
                       <!-- Photo 2 -->
					   <div class="form-group">
                           <div class="row">
	                           <p>
	                               <img alt="Visualiser la geolocalisation" id="thumbnail1"/>
	                            </p>
	                            <p>
	                               <label>* Geolocalisation</label>  
	                            </p>
	                            <div class="col-xs-6">
	                                <input type="file"
	                                   name="extraImageFile" accept="image/png, image/jpeg" /> 
	                                 <img class="img-responsive" style="height: 220px;width: 100%;"
								           th:src="@{${store.geolocateImagePath}}" /> 
	                            </div>
                            </div>
					    </div>
                      </div>
                   </div> 
				  </div>
				  		<!-- description -->
					<div class="form-group">
						<label class="col-md-2 control-label">* Gestionnaire:</label>
						<div class="col-md-8">
							<input name="manager" class="form-control" 
							    th:value="${store.manager}" 
								placeholder="Gestionnaire">
							<span class="help-block">Gestionnaire</span>
						</div>
					</div>
					  		<!-- Hours -->
					<div class="form-group">
						<label class="col-md-2 control-label">* Ouverture:</label>
						<div class="col-md-8">
							<input type="time" name="start" class="form-control" 
							    th:value="${store.start}" 
								placeholder="Heure d'ouverture">
							<span class="help-block">Ouverture</span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-2 control-label">* Fermeture:</label>
						<div class="col-md-8">
							<input type="time" name="end" class="form-control" 
							    th:value="${store.end}" 
								placeholder="Heure de fermeture">
							<span class="help-block">Fermeture</span>
						</div>
					</div>
                    <!--End Upload --->
                        	<!-- Address -->
                     <div class="form-group">
						<label class="col-md-2 control-label"> * Ville</label>
						<div class="col-md-8">
							<input
								type="text" name="town" th:value="${store.town}" 
								class="form-control" placeholder="Precisier la ville" />
							<span class="help-block">Ville</span>
						</div>
					</div>
					 <div class="form-group">
						<label class="col-md-2 control-label">* Quartier</label>
						<div class="col-md-8">
						   <input
								type="text" name="district" th:value="${store.district}" 
								class="form-control" placeholder="Precisier le quartier" />
							<span class="help-block">Quartier</span>
						</div>
					</div>
					 <div class="form-group">
						<label class="col-md-2 control-label">* Adresse</label>
						<div class="col-md-8">
							<input
									type="text" name="address" th:value="${store.address}" 
									class="form-control" placeholder="Precisier l'adresse" />							
							<span class="help-block">Adresse</span>
						</div>
					</div>
                        	<!-- Contacts -->
					<div class="form-group">
						<label class="col-md-2 control-label" for="phone">* Telephone</label>
						<div class="col-md-8">
							<input
								    type="text" name="phone" th:value="${store.phone}" 
									class="form-control" id="phone" placeholder="Precisier le numero de telephone" />
							<span class="help-block">Numero de telephone</span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-2 control-label" for="phone">* Email</label>
						<div class="col-md-8">
							<input
									type="email" name="email" th:value="${store.email}" 
									class="form-control" id="email" placeholder="Precisier l'email" />
							<span class="help-block">Email</span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-2 control-label" for="whatsapp">* Whatsapp</label>
						<div class="col-md-8">
							<input
								    type="text" name="whatsapp" th:value="${store.whatsapp}" 
									class="form-control" id="whatsapp" placeholder="Precisier le numero Whatsapp" />
							<span class="help-block">Numero Whatsapp</span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-2 control-label" for="facebook">* Facebook</label>
						<div class="col-md-8">
							<input
									type="text" name="facebook" th:value="${store.facebook}" 
									class="form-control" id="facebook" placeholder="Precisier le lien Facebook" />
							<span class="help-block">Lien Facebook</span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-md-2 control-label" for="instagram">* Instagram</label>
						<div class="col-md-8">
							<input
								    type="text" name="instagram" th:value="${store.instagram}" 
									class="form-control" id="instagram" placeholder="Precisier le lien Instagram" />
							<span class="help-block">Lien Instagram</span>
						</div>
					</div>
				
				<!-- 	End Contacts -->
					<div class="form-group">
						<div class="col-md-2"></div>
						<div class="col-md-8">
							<button type="submit" class="btn btn-success">Valider</button>
							<a class="btn btn-danger" th:href="@{/}">Annuler</a>
						</div>
					</div>
				</fieldset>
			</form>
		</div>
	</div>
	<div th:replace="common/headerDashboard :: body-bottom-scripts"></div>
	<script type="text/javascript">
		$(document).ready(function() {
		   /* 	
			$('#mainImage').change(function(){
				showImageThumbnail(this);
			}); */ 
			
			$("input[name='extraImageFile']").each(function(index){
				$(this).change(function(){
					showExtraImageThumbnail(this,index);
				});
			});
			function showImageThumbnail(fileInput){
				file = fileInput.files[0];
				reader = new FileReader();
				
				reader.onload = function(e){
					$('#thumbnail').attr('src',e.target.result);
				}
				reader.readAsDataURL(file);
			}
			
			function showExtraImageThumbnail(fileInput,index){
				file = fileInput.files[0];
				reader = new FileReader();
				
				reader.onload = function(e){
					$('#thumbnail'+index).attr('src',e.target.result);
				}
				reader.readAsDataURL(file);
			}
			
		})
	</script>
</body>
</html>
